!function t(a,e,i){function r(n,o){if(!e[n]){if(!a[n]){var d="function"==typeof require&&require;if(!o&&d)return d(n,!0);if(s)return s(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}var g=e[n]={exports:{}};a[n][0].call(g.exports,function(t){var e=a[n][1][t];return r(e?e:t)},g,g.exports,t,a,e,i)}return e[n].exports}for(var s="function"==typeof require&&require,n=0;n<i.length;n++)r(i[n]);return r}({1:[function(t,a,e){"use strict";Object.assign(mejs.MepDefaults,{vastAdTagUrl:"",vastAdsType:"vast"}),Object.assign(MediaElementPlayer.prototype,{vastAdTagIsLoading:!1,vastAdTagIsLoaded:!1,vastStartedPlaying:!1,vastAdTags:[],buildvast:function(t,a,e,i){var r=this;r.isVideo&&(""!==r.options.vastAdTagUrl&&r.vastLoadAdTagInfo(),r.buildads(t,a,e,i),r.vastSetupEvents())},vastSetupEvents:function(){var t=this,a=!1,e=!1,i=!1;t.container.addEventListener("mejsprerollstarted",function(){if(t.vastAdTags.length>0){var a=t.vastAdTags[0];if(a.trackingEvents.start&&t.adsLoadUrl(a.trackingEvents.start),a.trackingEvents.initialization&&t.adsLoadUrl(a.trackingEvents.initialization),!a.shown&&a.impressions.length>0)for(var e=0,i=a.impressions.length;e<i;e++)t.adsLoadUrl(a.impressions[e]);a.shown=!0}}),t.container.addEventListener("mejsprerolltimeupdate",function(r){var s=r.detail.duration,n=r.detail.currentTime,o=100*Math.min(1,Math.max(0,n/s)),d=t.vastAdTags[t.options.indexPreroll],l=o>=25&&o<50,g=o>=50&&o<75,v=o>=75&&o<100;d.trackingEvents.firstQuartile&&!a&&l?(t.adsLoadUrl(d.trackingEvents.firstQuartile),a=!0):d.trackingEvents.midpoint&&!e&&g?(t.adsLoadUrl(d.trackingEvents.midpoint),e=!0):d.trackingEvents.thirdQuartile&&!i&&v&&(t.adsLoadUrl(d.trackingEvents.thirdQuartile),i=!0)}),t.container.addEventListener("mejsprerollended",function(){t.vastAdTags.length>0&&t.options.indexPreroll<t.vastAdTags.length&&t.vastAdTags[t.options.indexPreroll].trackingEvents.complete&&t.adsLoadUrl(t.vastAdTags[t.options.indexPreroll].trackingEvents.complete)})},vastSetAdTagUrl:function(t){var a=this;a.options.vastAdTagUrl=t,a.options.indexPreroll=0,a.vastAdTagIsLoaded=!1,a.vastAdTags=[]},vastLoadAdTagInfo:function(){var t=this;t.adsDataIsLoading=!0,t.vastAdTagIsLoading=!0,t.loadAdTagInfoDirect()},loadAdTagInfoDirect:function(){var t=this;mejs.Utils.ajax(t.options.vastAdTagUrl,"xml",function(a){"vpaid"===t.options.vastAdsType?t.vpaidParseVpaidData(a):t.vastParseVastData(a)},function(a){t.loadAdTagInfoProxy()})},loadAdTagInfoProxy:function(){var t=this,a=location.protocol,e='select * from xml where url="'+encodeURI(t.options.vastAdTagUrl)+'"',i="http"+(/^https/.test(a)?"s":"")+"://query.yahooapis.com/v1/public/yql?format=xml&q="+e;mejs.Utils.ajax(i,"xml",function(a){"vpaid"===t.options.vastAdsType?t.vpaidParseVpaidData(a):t.vastParseVastData(a)},function(t){})},vastParseVastData:function(t){var a=this,e=t.getElementsByTagName("Ad");a.vastAdTags=[],a.options.indexPreroll=0;for(var i=0,r=e.length;i<r;i++){var s=e[i],n={id:s.getAttribute("id"),title:s.getElementsByTagName("AdTitle")[0].textContent.trim(),description:s.getElementsByTagName("Description")[0].textContent.trim(),impressions:[],clickThrough:s.getElementsByTagName("ClickThrough")[0].textContent.trim(),mediaFiles:[],trackingEvents:{},shown:!1},o=s.getElementsByTagName("Impression"),d=s.getElementsByTagName("MediaFile"),l=s.getElementsByTagName("Tracking");a.vastAdTags.push(n);for(var g=0,v=o.length;g<v;g++)n.impressions.push(o[g].textContent.trim());for(var m=0,p=l.length;m<p;m++){var c=l[m];n.trackingEvents[c.getAttribute("event")]=c.textContent.trim()}for(var u=0,h=d.length;u<h;u++){var f=d[u],T=f.getAttribute("type");""===a.media.canPlayType(T)&&null!==a.media.canPlayType(T).match(/(no|false)/)||n.mediaFiles.push({id:f.getAttribute("id"),delivery:f.getAttribute("delivery"),type:f.getAttribute("type"),bitrate:f.getAttribute("bitrate"),width:f.getAttribute("width"),height:f.getAttribute("height"),url:f.textContent.trim()})}}a.vastLoaded()},vpaidParseVpaidData:function(t){var a=this,e=t.getElementsByTagName("AdParameters");a.vpaidAdTags=[],a.options.indexPreroll=0;var i=JSON.parse(e[0].textContent.trim()),r=t.getElementsByTagName("Duration"),s={id:i.ad_id.trim(),title:i.title.trim(),clickThrough:i.page_url,impressions:[],mediaFiles:[],trackingEvents:{},shown:!1};if("undefined"!=typeof i.media.tracking.beacon)for(var n=0,o=i.media.tracking.beacon.length;n<o;n++){var d=i.media.tracking.beacon[n];"impression"===d.type||void 0!==d.mime_type&&"image/*"===d.mime_type||d.proxy_whitelist===!1?s.impressions.push(d.beacon_url.trim()):d.proxy_whitelist===!0&&(s.trackingEvents[d.type]=d.beacon_url.trim())}for(var l in i.media.video)if(i.media.video.hasOwnProperty(l)){var g=i.media.video[l],v=g.mime_type.trim();""===a.media.canPlayType(v)&&null!==a.media.canPlayType(v).match(/(no|false)/)||s.mediaFiles.push({id:g.media_id,format:g.format,type:v,transcoding:g.transcoding,width:g.width,height:g.height,duration:r,url:g.media_url})}a.vastAdTags.push(s),a.vastLoaded()},vastLoaded:function(){var t=this;t.vastAdTagIsLoaded=!0,t.vastAdTagIsLoading=!1,t.adsDataIsLoading=!1,t.vastStartPreroll()},vastStartPreroll:function(){for(var t=this,a=0;a<t.vastAdTags.length;)t.options.adsPrerollMediaUrl[a]=t.vastAdTags[a].mediaFiles[0].url,t.options.adsPrerollAdUrl[a]=t.vastAdTags[a].clickThrough,a++;t.adsStartPreroll()}})},{}]},{},[1]);
