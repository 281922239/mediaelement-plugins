!function t(e,a,r){function s(n,o){if(!a[n]){if(!e[n]){var l="function"==typeof require&&require;if(!o&&l)return l(n,!0);if(i)return i(n,!0);var d=new Error("Cannot find module '"+n+"'");throw d.code="MODULE_NOT_FOUND",d}var v=a[n]={exports:{}};e[n][0].call(v.exports,function(t){var a=e[n][1][t];return s(a?a:t)},v,v.exports,t,e,a,r)}return a[n].exports}for(var i="function"==typeof require&&require,n=0;n<r.length;n++)s(r[n]);return s}({1:[function(t,e,a){"use strict";Object.assign(mejs.MepDefaults,{vastAdTagUrl:""}),Object.assign(MediaElementPlayer.prototype,{vastAdTagIsLoading:!1,vastAdTagIsLoaded:!1,vastStartedPlaying:!1,vastAdTags:[],buildvast:function(t,e,a,r){var s=this;""!==s.options.vastAdTagUrl&&s.vastLoadAdTagInfo(),s.buildads(t,e,a,r),s.vastSetupEvents()},vastSetupEvents:function(){var t=this;t.container.addEventListener("mejsprerollstarted",function(){if(t.vastAdTags.length>0){var e=t.vastAdTags[0];if(e.trackingEvents.start&&t.adsLoadUrl(e.trackingEvents.start),!e.shown&&e.impressions.length>0)for(var a=0,r=e.impressions.length;a<r;a++)t.adsLoadUrl(e.impressions[a]);e.shown=!0}}),t.container.on("mejsprerollended",function(){t.vastAdTags.length>0&&t.options.indexPreroll<t.vastAdTags.length&&t.vastAdTags[t.options.indexPreroll].trackingEvents.complete&&t.adsLoadUrl(t.vastAdTags[t.options.indexPreroll].trackingEvents.complete)})},vastSetAdTagUrl:function(t){var e=this;e.options.vastAdTagUrl=t,e.options.indexPreroll=0,e.vastAdTagIsLoaded=!1,e.vastAdTags=[]},vastLoadAdTagInfo:function(){var t=this;t.adsDataIsLoading=!0,t.vastAdTagIsLoading=!0,t.loadAdTagInfoDirect()},loadAdTagInfoDirect:function(){var t=this;mejs.Utils.ajax(t.options.vastAdTagUrl,function(e){t.vastParseVastData(e)},function(e){t.loadAdTagInfoProxy()})},loadAdTagInfoProxy:function(){var t=this,e=location.protocol,a='select * from xml where url="'+encodeURI(t.options.vastAdTagUrl)+'"',r="http"+(/^https/.test(e)?"s":"")+"://query.yahooapis.com/v1/public/yql?format=xml&q="+a;mejs.Utils.ajax(r,function(e){t.vastParseVastData(e)},function(t){})},vastParseVastData:function(t){var e=this;e.vastAdTags=[],e.options.indexPreroll=0;for(var a=t.querySelectorAll("Ad"),r=0,s=a.length;r<s;r++){var i=a[r],n={id:i.getAttribute("id"),title:i.querySelector("AdTitle").innerText.trim(),description:i.querySelector("Description").innerText.trim(),impressions:[],clickThrough:i.querySelector("ClickThrough").innerText.trim(),mediaFiles:[],trackingEvents:{},shown:!1},o=i.querySelectorAll("Impression"),l=i.querySelectorAll("MediaFile"),d=i.querySelectorAll("Tracking");e.vastAdTags.push(n);for(var v=0,g=o.length;r<g;r++)n.impressions.push(o[v].innerText.trim());for(var u=0,c=d.length;r<c;r++){var p=d[u];n.trackingEvents[p.getAttribute("event")]=p.innerText.trim()}for(var f=0,A=l.length;r<A;r++){var T=l[f],h=T.attr("type");""!==e.media.canPlayType(h).toString().replace(/no/,"").replace(/false/,"")&&n.mediaFiles.push({id:T.getAttribute("id"),delivery:T.getAttribute("delivery"),type:T.getAttribute("type"),bitrate:T.getAttribute("bitrate"),width:T.getAttribute("width"),height:T.getAttribute("height"),url:T.innerText.trim()})}}e.vastLoaded()},vastLoaded:function(){var t=this;t.vastAdTagIsLoaded=!0,t.vastAdTagIsLoading=!1,t.adsDataIsLoading=!1,t.vastStartPreroll()},vastStartPreroll:function(){for(var t=this,e=0;e<t.vastAdTags.length;)t.options.adsPrerollMediaUrl[e]=t.vastAdTags[e].mediaFiles[0].url,t.options.adsPrerollAdUrl[e]=t.vastAdTags[e].clickThrough,e++;t.adsStartPreroll()}})},{}]},{},[1]);
