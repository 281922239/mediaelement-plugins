!function e(t,a,r){function s(i,o){if(!a[i]){if(!t[i]){var c="function"==typeof require&&require;if(!o&&c)return c(i,!0);if(n)return n(i,!0);var d=new Error("Cannot find module '"+i+"'");throw d.code="MODULE_NOT_FOUND",d}var l=a[i]={exports:{}};t[i][0].call(l.exports,function(e){var a=t[i][1][e];return s(a||e)},l,l.exports,e,t,a,r)}return a[i].exports}for(var n="function"==typeof require&&require,i=0;i<r.length;i++)s(r[i]);return s}({1:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r={isCastStarted:!1,isCastLoaded:!1,mediaQueue:[],enqueueCast:function(e){r.isLoaded="undefined"!=typeof cast,r.isLoaded?r.initializeCast(e):(r.loadApi(),r.mediaQueue.push(e))},loadApi:function(){if(!r.isCastStarted){window.__onGCastApiAvailable=function(e){e&&r.castReady()};var e=document.createElement("script");e.src="//www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1",document.body.appendChild(e),r.isCastStarted=!0}},castReady:function(){for(r.isLoaded=!0,r.isCastLoaded=!0;r.mediaQueue.length>0;){var e=r.mediaQueue.pop();r.initializeCast(e)}},initializeCast:function(e){window["__ready__"+e.id](e.options)},getErrorMessage:function(e){var t=e.description?" : "+e.description:".",a=void 0;switch(errorCode.code){case chrome.cast.ErrorCode.API_NOT_INITIALIZED:a="The API is not initialized"+t;break;case chrome.cast.ErrorCode.CANCEL:a="The operation was canceled by the user"+t;break;case chrome.cast.ErrorCode.CHANNEL_ERROR:a="A channel to the receiver is not available"+t;break;case chrome.cast.ErrorCode.EXTENSION_MISSING:a="The Cast extension is not available"+t;break;case chrome.cast.ErrorCode.INVALID_PARAMETER:a="The parameters to the operation were not valid"+t;break;case chrome.cast.ErrorCode.RECEIVER_UNAVAILABLE:a="No receiver was compatible with the session request"+t;break;case chrome.cast.ErrorCode.SESSION_ERROR:a="A session could not be created, or a session was invalid"+t;break;case chrome.cast.ErrorCode.TIMEOUT:a="The operation timed out"+t;break;default:a="Unknown error: "+errorCode.code}console.error(a)}},s=a.CastRenderer={name:"chromecast",options:{prefix:"chromecast",cast:{appID:null,policy:"origin"}},canPlayType:function(){return!0},create:function(e,t,a){var s={},n=null,i=null,o=1;s.options=t,s.id=e.id+"_"+t.prefix,s.mediaElement=e;for(var c=mejs.html5media.properties,d=0,l=c.length;d<l;d++)!function(t){var a=""+t.substring(0,1).toUpperCase()+t.substring(1);s["get"+a]=function(){if(null!==n){switch(t){case"currentTime":return n.currentTime;case"duration":return n.duration;case"volume":return o=n.volumeLevel;case"paused":return n.isPaused;case"ended":return n.ended;case"muted":return n.isMuted;case"src":return e.originalNode.getAttribute("src");case"readyState":return 4}return null}return null},s["set"+a]=function(a){if(null!==n)switch(t){case"src":var r="string"==typeof a?a:a[0].src;e.setSrc(r);break;case"currentTime":n.currentTime=a,i.seek(),setTimeout(function(){var t=mejs.Utils.createEvent("timeupdate",s);e.dispatchEvent(t)},50);break;case"muted":!0!==a||n.isMuted?!1===a&&n.isMuted&&i.muteOrUnmute():i.muteOrUnmute(),setTimeout(function(){var t=mejs.Utils.createEvent("volumechange",s);e.dispatchEvent(t)},50);break;case"volume":o=a,n.volumeLevel=a,i.setVolumeLevel(),setTimeout(function(){var t=mejs.Utils.createEvent("volumechange",s);e.dispatchEvent(t)},50);break;case"readyState":var c=mejs.Utils.createEvent("canplay",s);e.dispatchEvent(c);break;default:console.log("Chromecast "+s.id,t,"UNSUPPORTED property")}}}(c[d]);for(var u=mejs.html5media.methods,m=0,p=u.length;m<p;m++)!function(t){s[t]=function(){if(null!==n)switch(t){case"play":n.isPaused&&(i.playOrPause(),setTimeout(function(){var t=mejs.Utils.createEvent("play",s);e.dispatchEvent(t)},50));break;case"pause":n.isPaused||(i.playOrPause(),setTimeout(function(){var t=mejs.Utils.createEvent("pause",s);e.dispatchEvent(t)},50));break;case"load":var a=e.originalNode.getAttribute("src"),o=mejs.Utils.getTypeFromFile(a),c=new chrome.cast.media.MediaInfo(a,o),d=cast.framework.CastContext.getInstance().getCurrentSession();c.metadata=new chrome.cast.media.GenericMediaMetadata,c.metadata.metadataType=chrome.cast.media.MetadataType.GENERIC,e.originalNode.getAttribute("title")&&(c.metadata.title=e.originalNode.getAttribute("title")),e.originalNode.getAttribute("poster")&&(c.metadata.images=[{url:mejs.Utils.absolutizeUrl(e.originalNode.getAttribute("poster"))}]);var l=new chrome.cast.media.LoadRequest(c);d.loadMedia(l).then(function(){i.playOrPause(),setTimeout(function(){var t=mejs.Utils.createEvent("play",s);e.dispatchEvent(t)},50)},function(e){r.getErrorMessage(e)})}}}(u[m]);return window["__ready__"+s.id]=function(t){var r=void 0;switch(t.policy){case"tab":r="TAB_AND_ORIGIN_SCOPED";break;case"page":r="PAGE_SCOPED";break;default:r="ORIGIN_SCOPED"}cast.framework.CastContext.getInstance().setOptions({receiverApplicationId:t.appID||chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,autoJoinPolicy:chrome.cast.AutoJoinPolicy[r]}),e.castPlayer=n=new cast.framework.RemotePlayer,e.castPlayerController=i=new cast.framework.RemotePlayerController(n),i.addEventListener(cast.framework.RemotePlayerEventType.IS_CONNECTED_CHANGED,function(){if(cast&&cast.framework&&n.isConnected)return i.addEventListener(cast.framework.RemotePlayerEventType.IS_PAUSED_CHANGED,function(){n.isPaused?s.pause():s.play()}),i.addEventListener(cast.framework.RemotePlayerEventType.IS_MUTED_CHANGED,function(){return s.setMuted(n.isMuted)}),i.addEventListener(cast.framework.RemotePlayerEventType.IS_MEDIA_LOADED_CHANGED,function(){setTimeout(function(){var t=mejs.Utils.createEvent("loadedmetadata",s);e.dispatchEvent(t)},50)}),i.addEventListener(cast.framework.RemotePlayerEventType.VOLUME_LEVEL_CHANGED,function(){var t=mejs.Utils.createEvent("volumechange",s);e.dispatchEvent(t)}),i.addEventListener(cast.framework.RemotePlayerEventType.DURATION_CHANGED,function(){setTimeout(function(){var t=mejs.Utils.createEvent("timeupdate",s);e.dispatchEvent(t)},50)}),i.addEventListener(cast.framework.RemotePlayerEventType.CURRENT_TIME_CHANGED,function(){setTimeout(function(){var t=mejs.Utils.createEvent("timeupdate",s);e.dispatchEvent(t)},50)}),i.addEventListener(cast.framework.RemotePlayerEventType.IS_MUTED_CHANGED,function(){return s.setMuted(n.isMuted)}),void s.load();e.style.display="";var t=renderer.select(a,e.renderers);e.changeRenderer(t.rendererName,a)})},e.autoplay=!1,r.enqueueCast({id:s.id,options:t.cast}),s.setSize=function(){},s.hide=function(){},s.show=function(){},s.destroy=function(){null!==n&&i.stop(),e.style.display=""},s}};mejs.Renderers.add(s),mejs.i18n.en["mejs.chromecast-legend"]="Casting to:",Object.assign(mejs.MepDefaults,{castTitle:null}),Object.assign(MediaElementPlayer.prototype,{buildchromecast:function(e,t,a,r){var s=this,n=document.createElement("div"),i=mejs.Utils.isString(s.options.castTitle)?s.options.castTitle:"Chromecast";if(e.isVideo){e.chromecastLayer=document.createElement("div"),e.chromecastLayer.className=s.options.classPrefix+"chromecast-layer "+s.options.classPrefix+"layer",e.chromecastLayer.innerHTML='<div class="'+s.options.classPrefix+'chromecast-info"></div>',e.chromecastLayer.style.display="none",a.insertBefore(e.captions,a.firstChild),n.className=s.options.classPrefix+"button "+s.options.classPrefix+"chromecast-button",n.innerHTML='<button type="button" is="google-cast-button" aria-controls="'+s.id+'" title="'+i+'" aria-label="'+i+'" tabindex="0"></button>',n.style.display="none",s.addControlElement(n,"chromecast"),s.castButton=n,e.chromecastLayer.innerHTML='<div class="'+s.options.classPrefix+'chromecast-container"><span class="'+s.options.classPrefix+'chromecast-icon"></span><span class="'+s.options.classPrefix+'chromecast-info">'+mejs.i18n.t("mejs.chromecast-legend")+' <span class="device"></span></span></div>';var o=a.querySelector("."+s.options.classPrefix+"poster");r.originalNode.getAttribute("poster")&&(e.chromecastLayer.innerHTML+='<img src="'+r.originalNode.getAttribute("poster")+'" width="100%" height="100%">');var c=r.getSrc(),d=[{src:c,type:getTypeFromFile(c)}],l=renderer.select(d,["chromecast"]);r.changeRenderer(l.rendererName,d);var u=setInterval(function(){void 0!==r.castPlayer&&(n.style.display="",o.style.display="",e.chromecastLayer.style.display="block",setTimeout(function(){s.setPlayerSize(s.width,s.height),s.setControlsSize()},0),clearInterval(u),r.castPlayerController.addEventListener(cast.framework.RemotePlayerEventType.IS_CONNECTED_CHANGED,function(){if(cast&&cast.framework){if(r.castPlayer.isConnected){var t=cast.framework.CastContext.getInstance().getCurrentSession();return a.querySelector("."+s.options.classPrefix+"chromecast-info").querySelector(".device").innerText=t.getCastDevice().friendlyName,o.style.display="",r.addEventListener("play",function(){o.style.display=""}),void r.addEventListener("playing",function(){o.style.display=""})}e.chromecastLayer.style.display="none"}}))},500)}},clearchromecast:function(e){e.castButton&&e.castButton.remove(),e.chromecastLayer&&e.chromecastLayer.remove()}})},{}]},{},[1]);
