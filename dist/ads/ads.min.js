!function e(a,s,r){function i(d,n){if(!s[d]){if(!a[d]){var o="function"==typeof require&&require;if(!n&&o)return o(d,!0);if(t)return t(d,!0);var l=new Error("Cannot find module '"+d+"'");throw l.code="MODULE_NOT_FOUND",l}var p=s[d]={exports:{}};a[d][0].call(p.exports,function(e){var s=a[d][1][e];return i(s?s:e)},p,p.exports,e,a,s,r)}return s[d].exports}for(var t="function"==typeof require&&require,d=0;d<r.length;d++)i(r[d]);return i}({1:[function(e,a,s){"use strict";mejs.i18n.en["mejs.ad-skip"]="Skip ad",mejs.i18n.en["mejs.ad-skip-info"]=["Skip in 1 second","Skip in %1 seconds"],Object.assign(mejs.MepDefaults,{adsPrerollMediaUrl:[],adsPrerollAdUrl:[],adsPrerollAdEnableSkip:!1,adsPrerollAdSkipSeconds:-1,indexPreroll:0}),Object.assign(MediaElementPlayer.prototype,{adsLoaded:!1,adsDataIsLoading:!1,adsCurrentMediaUrl:"",adsCurrentMediaDuration:0,adsPlayerHasStarted:!1,buildads:function(e,a,s){var r=this;if(!r.adsLoaded){r.adsLoaded=!0,e.adsLayer=document.createElement("div"),e.adsLayer.className=r.options.classPrefix+"layer "+r.options.classPrefix+"overlay "+r.options.classPrefix+"ads",e.adsLayer.innerHTML='<a href="#" target="_blank"></a>'+('<div class="'+r.options.classPrefix+'ads-skip-block">')+('<span class="'+r.options.classPrefix+'ads-skip-message"></span>')+('<span class="'+r.options.classPrefix+'ads-skip-button">'+mejs.i18n.t("mejs.ad-skip")+"</span>")+"</div>",e.adsLayer.style.display="none";var i=s.querySelector("."+r.options.classPrefix+"overlay-play");i.parentNode.insertBefore(e.adsLayer,i),e.adsLayer.querySelector("a").addEventListener("click",r.adsAdClick),e.adsSkipBlock=e.adsLayer.querySelector("."+r.options.classPrefix+"ads-skip-block"),e.adsSkipBlock.style.display="none",e.adsSkipMessage=e.adsLayer.querySelector("."+r.options.classPrefix+"ads-skip-message"),e.adsSkipMessage.style.display="none",e.adsSkipButton=e.adsLayer.querySelector("."+r.options.classPrefix+"ads-skip-button"),e.adsSkipButton.addEventListener("click",r.adsSkipClick),r.media.addEventListener("play",r.adsMediaTryingToStart),r.media.addEventListener("playing",r.adsMediaTryingToStart),r.media.addEventListener("canplay",r.adsMediaTryingToStart),r.media.addEventListener("loadedmetadata",r.adsMediaTryingToStart),r.options.indexPreroll<r.options.adsPrerollMediaUrl.length&&r.adsStartPreroll()}},adsMediaTryingToStart:function(){var e=this;e.adsDataIsLoading&&!e.media.paused&&e.media.pause(),e.adsPlayerHasStarted=!0},adsStartPreroll:function(){var e=this;e.media.addEventListener("loadedmetadata",e.adsPrerollMeta),e.media.addEventListener("playing",e.adsPrerollStarted),e.media.addEventListener("ended",e.adsPrerollEnded),e.media.addEventListener("timeupdate",e.adsPrerollUpdate),0===e.options.indexPreroll&&(e.adsCurrentMediaUrl=e.media.src,e.adsCurrentMediaDuration=e.media.duration),e.media.setSrc(e.options.adsPrerollMediaUrl[e.options.indexPreroll]),e.media.load(),e.adsPlayerHasStarted&&e.media.play()},adsPrerollMeta:function(){var e=this,a=0;e.options.duration>0?a=e.options.duration:isNaN(e.adsCurrentMediaDuration)||(a=e.adsCurrentMediaDuration),setTimeout(function(){e.controls.querySelector("."+e.options.classPrefix+"duration").innerHTML=mejs.Utils.secondsToTimeCode(a,e.options.alwaysShowHours,e.options.showTimecodeFrameCount,e.options.framesPerSecond,e.options.secondsDecimalLength)},250)},adsPrerollStarted:function(){var e=this;e.media.removeEventListener("playing",e.adsPrerollStarted),e.disableControls(),e.adsLayer.style.display="block",e.options.adsPrerollAdUrl[e.options.indexPreroll]?e.adsLayer.querySelector("a").href=e.options.adsPrerollAdUrl[e.options.indexPreroll]:(e.adsLayer.querySelector("a").href="#",e.adsLayer.querySelector("a").setAttribute("target","")),e.options.adsPrerollAdEnableSkip?(e.adsSkipBlock.style.display="block",e.options.adsPrerollAdSkipSeconds>0?(e.adsSkipMessage.innerHTML=mejs.i18n.t("mejs.ad-skip-info").replace("%1",e.options.adsPrerollAdSkipSeconds.toString()),e.adsSkipMessage.style.display="block",e.adsSkipButton.style.display="none"):(e.adsSkipMessage.style.display="none",e.adsSkipButton.style.display="block")):e.adsSkipBlock.style.display="none";var a=mejs.createEvent("mejsprerollstarted",e.container);e.container.dispatchEvent(a)},adsPrerollUpdate:function(){var e=this;e.options.adsPrerollAdEnableSkip&&e.options.adsPrerollAdSkipSeconds>0&&(e.media.currentTime>e.options.adsPrerollAdSkipSeconds?(e.adsSkipButton.style.display="block",e.adsSkipMessage.style.display="none"):e.adsSkipMessage.innerHTML=mejs.i18n.t("mejs.ad-skip-info").replace("%1",Math.round(e.options.adsPrerollAdSkipSeconds-e.media.currentTime).toString()));var a=mejs.createEvent("mejsprerolltimeupdate",e.container);e.container.dispatchEvent(a)},adsPrerollEnded:function(){var e=this,a=mejs.createEvent("mejsprerollended",e.container);e.container.dispatchEvent(a),e.options.indexPreroll++,e.options.indexPreroll<e.options.adsPrerollMediaUrl.length?e.adsStartPreroll():e.adRestoreMainMedia()},adRestoreMainMedia:function(){var e=this;e.media.setSrc(e.adsCurrentMediaUrl),setTimeout(function(){e.media.load(),e.media.play()},10),e.enableControls(),e.adsLayer.style.display="none",e.media.removeEventListener("ended",e.adsPrerollEnded),e.media.removeEventListener("loadedmetadata",e.adsPrerollMeta),e.media.removeEventListener("timeupdate",e.adsPrerollUpdate);var a=mejs.createEvent("mejsprerollmainstarted",e.container);e.container.dispatchEvent(a)},adsAdClick:function(){var e=this;e.media.paused?e.media.play():e.media.pause();var a=mejs.createEvent("mejsprerolladsclicked",e.container);e.container.dispatchEvent(a)},adsSkipClick:function(){var e=this,a=mejs.createEvent("mejsprerollskipclicked",e.container);e.container.dispatchEvent(a),a=mejs.createEvent("mejsprerollended",e.container),e.container.dispatchEvent(a),e.options.indexPreroll++,e.options.indexPreroll<e.options.adsPrerollMediaUrl.length?e.adsStartPreroll():e.adRestoreMainMedia()},prerollAdsFinished:function(){var e=this;return e.options.indexPreroll===e.options.adsPrerollMediaUrl.length},adsLoadUrl:function(e){var a=new Image,s=Math.round(1e5*Math.random());a.src=""+e+(e.includes("?")?"&":"?")+"random"+s+"="+s,a.loaded=function(){a=null}}})},{}]},{},[1]);
